<% content_for(:phase) { "Alpha" } %>

<% content_for(
  :page_title,
  page_title(
    "Check your answers before sending your application",
    journey: current_journey_routing_name,
    show_error: @form.errors.any?
  )
) %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <h1 class="govuk-heading-xl">
      Check your answers
    </h1>

    <%= render(
      partial: "claims/check_your_answers_section",
      locals: {
        heading: "Nursery details",
        answers: journey.answers_for_claim(@form.journey_session).nursery_answers
      }
    ) %>

    <%= render(
      partial: "claims/check_your_answers_section",
      locals: {
        heading: "Teacher details",
        answers: journey.answers_for_claim(@form.journey_session).manage_teachers_answers
      }
    ) %>

    <% @form.answers.teachers.each do |teacher| %>
      <%= render(
        partial: "teacher_card",
        locals: { teacher: teacher, answers: @form.answers }
      ) %>
    <% end %>

    <p class="govuk-body">
      By submitting this information, youâ€™re confirming that it is correct to the best
      of your knowledge.
    </p>

    <%= form_with(
      model: @form,
      url: @form.url,
      method: :patch,
      builder: GOVUKDesignSystemFormBuilder::FormBuilder
    ) do |f| %>
      <%= f.govuk_error_summary %>

      <%= f.hidden_field :check_your_answers_form_completed, value: true %>

      <%= f.govuk_submit("Confirm and send") %>
    <% end %>
  </div>
</div>
