<%= content_for(
  :page_title,
  "Review a targeted retention incentive payment claim"
) %>

<% content_for :back_link do %>
  <%= govuk_back_link href: backlink_path %>
<% end %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <h1 class="govuk-heading-xl">
      Review a targeted retention incentive payment claim
    </h1>

    <%= form_with(
      model: @form,
      url: further_education_payments_providers_claim_verification_path(
        @form.claim,
        @form.provider,
        slug: @form.slug,
      ),
      builder: GOVUKDesignSystemFormBuilder::FormBuilder,
      method: :patch,
    ) do |f| %>
      <%= f.govuk_error_summary %>

      <%= render partial: "claim_summary", locals: { claim: f.object.claim } %>

      <h2 class="govuk-heading-m">
        Subject area
      </h2>

      <%= f.govuk_check_boxes_fieldset :provider_verification_actual_subjects_taught,
        legend: {
          text: "Which subject area does #{f.object.claim.full_name} teach?",
          tag: "h3",
          size: "s",
        },
        hint: {
          text: "Select all that apply"
        } do %>
        <% @form.checkbox_options[0..-2].each do |option| %>
          <%= f.govuk_check_box :provider_verification_actual_subjects_taught,
            option.id,
            label: { text: option.name },
            link_errors: @form.checkbox_options.first == option %>
        <% end %>

        <%= f.govuk_check_box_divider %>

        <% option = @form.checkbox_options.last %>
        <%= f.govuk_check_box :provider_verification_actual_subjects_taught,
          option.id,
          label: { text: option.name },
          exclusive: true %>
      <% end %>

      <%= f.govuk_submit("Continue") %>

      <%= f.govuk_submit(
        "Save and come back later",
        secondary: true,
        name: "save_and_exit",
        value: true,
        class: "govuk-!-margin-left-2"
      ) %>
    <% end %>
  </div>
</div>
