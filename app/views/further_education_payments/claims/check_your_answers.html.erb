<% content_for(
  :page_title,
  page_title(
    "Check your answers before sending your application",
    journey: current_journey_routing_name,
    show_error: @form.errors.any?
  )
) %>

<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <%= form_with model: @form, url: @form.url, method: :patch, builder: GOVUKDesignSystemFormBuilder::FormBuilder do |f| %>
      <%= f.govuk_error_summary %>
    <% end %>

    <h1 class="govuk-heading-xl">
      Check your answers before sending your application
    </h1>

    <%= render partial: "claims/check_your_answers_section",
      locals: {
        heading: "Personal details",
        answers: journey.answers_for_claim(@form.journey_session).identity_answers
      } %>

    <%= render partial: "claims/check_your_answers_section",
      locals: {
        heading: "Payment details",
        answers: journey.answers_for_claim(@form.journey_session).payment_answers
      } %>

    <%= form_with model: @form, url: @form.url, method: :patch, builder: GOVUKDesignSystemFormBuilder::FormBuilder do |f| %>
      <%= f.govuk_check_boxes_fieldset(
        :claimant_declaration,
        multiple: false,
        legend: {
          text: t("further_education_payments.check_your_answers.heading_send_application"),
          size: "m"
        }
      ) do %>

        <%= f.govuk_check_box(
          :claimant_declaration,
          1,
          0,
          multiple: false,
          link_errors: true,
          label: {
            text: t("further_education_payments.check_your_answers.statement")
          }
        ) %>
      <% end %>

      <%= f.govuk_submit t("further_education_payments.check_your_answers.btn_text") %>
    <% end %>
  </div>
</div>
