<div class="govuk-grid-row">
  <div class="govuk-grid-column-two-thirds">
    <h1 class="govuk-heading-xl">
      Choose and upload SLC data
    </h1>
    <dl class="govuk-summary-list govuk-!-margin-bottom-9">
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">
          Number of rows currently uploaded
        </dt>

        <dd class="govuk-summary-list__value">
          <%= StudentLoansData.count %>
        </dd>
      </div>
      <div class="govuk-summary-list__row">
        <dt class="govuk-summary-list__key">
          Number of unique NINOs
        </dt>

        <dd class="govuk-summary-list__value">
          <%= StudentLoansData.distinct.count(:nino) %>
        </dd>
      </div>
    </dl>

    <p class="govuk-body">
      Before uploading please note the following:
    </p>

    <ul class="govuk-list govuk-list--bullet">
      <li>All previously uploaded SLC data will be wiped.</li>
      <li>Previously uploaded data will remain wiped if there are any errors processing the uploaded file.</li>
      <li>Do not upload another file until an email has been received of success or failure.</li>
      <li>You can wipe all data by uploading a CSV file with just the header row and no data rows.</li>
    </ul>

    <%= form_with model: @upload_form, scope: :student_loans_data_upload, url: admin_student_loans_data_uploads_path, builder: GOVUKDesignSystemFormBuilder::FormBuilder do |f| %>
      <%= f.govuk_error_summary %>

      <%= f.govuk_file_field :file,
        label: { text: "Upload a CSV file" },
        javascript: true %>

      <%= f.govuk_submit "Upload" %>
    <% end %>
  </div>
</div>
